---
// Astro Frontmatter
import Image from '../components/Image.astro';
import Layout from '../layouts/Layout.astro';
import { getCollection } from "astro:content";
import PropertyCarousel from '../components/PropertyCarousel.astro';

import Service1 from '../assets/img/service1.webp';
import Service2 from '../assets/img/service2.webp';
import Service3 from '../assets/img/service3.webp';
import HeaderLogo from '../assets/img/risevista-logo.webp';
import Hero1 from '../assets/img/hero1.webp';
import Hero2 from '../assets/img/hero2.webp';
import Hero3 from '../assets/img/hero3.webp';
import Hero4 from '../assets/img/hero4.webp';
import Bridge from '../assets/img/bridge.png';
import Circle from '../assets/img/circle.png';
import Bg from '../assets/img/risevista-bg.webp';
// 4枚の画像を定義（実際のパスに変更してください）
const heroImages = [
  Hero1, 
  Hero2, 
  Hero3, 
  Hero4  
];


// ブログ記事の取得とサマリー生成
const posts = await getCollection("blog");
// @ts-ignore
const withExcerpt = posts
  .filter((post: any) => !post.data.draft) // 下書きを除外
  .sort((a: any, b: any) => b.data.date.getTime() - a.data.date.getTime()) // 日付で降順ソート
  .slice(0, 6) // 最新6件のみ表示
  .map((post: any) => {
    // Markdownの生テキストからサマリーを生成
    const bodyText = post.body
      .replace(/^#+\s*/gm, '') // 見出し記号を削除
      .replace(/\*\*(.*?)\*\*/g, '$1') // 太字記号を削除
      .replace(/\*(.*?)\*/g, '$1') // 斜体記号を削除
      .replace(/`(.*?)`/g, '$1') // インラインコード記号を削除
      .replace(/\[([^\]]+)\]\([^)]+\)/g, '$1') // リンク記号を削除
      .replace(/^\s*[-*+]\s*/gm, '') // リスト記号を削除
      .replace(/\n+/g, ' ') // 改行を空白に変換
      .replace(/\s+/g, ' ') // 連続する空白を1つに
      .trim();
    
    const excerpt = bodyText.slice(0, 100);
    return { ...post, excerpt };
  });


---

<Layout title="不動産をお探しなら株式会社RISE VISTA｜人生100年時代を支える総合不動産会社">
  <!-- Preloader overlay -->
  <div id="preloader" class="fixed inset-0 z-[1000] flex items-center justify-center bg-primary-back">
    <div class="h-10 w-10 rounded-full border-2 border-teal-600 border-t-transparent animate-spin"></div>
  </div>
  <div id="page-root" class="opacity-0 transition-opacity duration-500">
<!-- Hero Section -->

<!-- ===== Hero: Mobile (md未満) ===== -->
<section class="relative bg-primary-back min-h-[100dvh] flex flex-col md:hidden pt-20">

  <!-- 2) 楕円スライダー -->
  <div class="relative w-full flex-1 flex items-center justify-center">
    <div class="relative w-full h-[60vh]">
      <div class="absolute inset-0">
        <div class="ellipse-image-container">
          <div class="ellipse-wrapper">
            {heroImages.map((heroImg, index) => (
              <Image
                src={heroImg}
                alt={`背景画像 ${index + 1}`}
                class={`ellipse-background-image slide-${index}`}
                loading={index === 0 ? "eager" : "lazy"}
                decoding="async"
                data-preload
                aria-hidden="true"
              />
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 3) 縦書きテキストとスマホ用SCROLLバー -->
  <div class="absolute left-2 bottom-5 z-20 flex items-end">
    <!-- スマホ用SCROLLバー -->
    <div class="flex flex-col items-center justify-end h-[200px] mr-3">
      <p class="text-primary font-tsukushi writing-vertical mb-4 text-[12px]">SCROLL</p>
      <div class="h-[60px] flex items-center">
        <div class="w-[0.5px] h-[60px] bg-primary animate-rise-fade opacity-60"></div>
      </div>
    </div>
    
    <!-- 縦書きテキスト -->
    <div class="writing-vertical text-secondary text-[16px] leading-relaxed tracking-[0.3em] font-tsukushi">
      <div class="mt-16 fade-chars">日本に健全な投資文化を育み</div>
      <div class="mt-52 fade-chars">豊かさと成長を次世代へ</div>
    </div>
  </div>

  <!-- 4) 右上テキスト -->
  <div class="absolute right-1 top-24 z-20 px-4">
    <div class="text-secondary text-[28px] leading-relaxed tracking-[0.1em] font-tsukushi text-right">
            <div>人生100年時代を支える</div>
      <div class="mt-2">あなたのパートナーに</div>
    </div>
  </div>

  <!-- 4) 本文テキスト -->
  <div class="w-4/5 ml-auto pr-6 pb-6">
    <p class="text-secondary text-[16px] leading-6 tracking-normal font-tsukushi text-right">
      RISE VISTAは、「不動産」という枠組みを超えて、未来を創る力になりたいと考えています。 
    </p>
  </div>
</section>

<!-- ===== Hero: Desktop (md以上) —— 既存をそのまま残す ===== -->
<section class="relative bg-primary-back min-h-[100dvh] overflow-hidden pt-20 md:pt-64 hidden md:flex">
  <!-- 楕円形背景画像コンテナ --> 
  <div class="absolute top-10 left-0 w-full h-full z-0">
    <div class="ellipse-image-container">
      <div class="ellipse-wrapper">
        {heroImages.map((heroImg, index) => (
          <Image
            src={heroImg}
            alt={`背景画像 ${index + 1}`}
            class={`ellipse-background-image slide-${index}`}
            loading={index === 0 ? "eager" : "lazy"}
            decoding="async"
            data-preload
            aria-hidden="true"
          />
        ))}
      </div>
    </div>
  </div>

  <!-- 縦書きテキスト -->
  <div class="absolute left-24 top-32 z-20 mt-10">
    <div class="writing-vertical text-secondary text-[32px] leading-relaxed tracking-wider font-tsukushi">  
      <div class="fade-chars">日本に健全な投資文化を育み</div>
      <div class="mt-48 fade-chars">豊かさと成長を次世代へ</div>
    </div>
  </div>

  <!-- 右上テキスト -->
  <div class="absolute right-16 md:right-24 top-32 z-20">
    <div class="text-secondary text-[48px] leading-relaxed tracking-wider font-tsukushi text-right mb-10">
      <div>人生100年時代を支える</div>
      <div class="mt-3">あなたのパートナーに</div>
    </div>
  </div>

  <!--  SCROLLバー（統合） -->
  <div class="absolute right-0 bottom-0 sm:top-0 h-[100px] sm:h-full w-[40px] md:w-[5%] bg-primary-back text-primary z-50 sm:flex hidden flex-col items-center justify-end pb-10">
    <p class="text-primary font-tsukushi writing-vertical mb-4 text-[8px] md:text-sm">SCROLL</p>
    <div class="relative overflow-visible h-[60px]">
      <div class="absolute bottom-0 w-[0.5px] h-[60px] bg-primary animate-rise-fade opacity-60"></div>
    </div>
  </div>

  
  <!-- テキスト -->
  <div class="text-primary p-6 md:p-10 w-[88%] z-20 opacity-90 absolute bottom-8 right-16 md:bottom-0 md:right-24 md:w-[42%] md:max-w-xl animate-text-up">
    <p class="mt-6 text-[18px] text-secondary tracking-normal font-tsukushi">
      RISE VISTAは、「不動産」という枠組みを超えて、未来を創る力になりたいと考えています。
    </p>  
  </div>
</section>

  
  <!-- MISSION Section -->
<section class="mission-section w-full flex justify-center items-center min-h-fit pt-24 md:pt-48 pb-48 bg-primary-back font-tsukushi">
  <div class="w-full max-w-6xl flex flex-col md:flex-row items-center gap-6 md:gap-8 px-4">
    
    <!-- 左カラム：テキスト（幅3） -->
    <div class="flex-[3] flex flex-col items-start justify-center text-primary">
      <h2 class="text-[18px] md:text-[32px] tracking-widest mb-4 md:mb-6 !font-tsukushi text-secondary fade-in-text" style="--delay: 0.2s;">
        一人ひとりの力を信じ、革新と創造を通じて人生100年時代を支えるパートナーに
      </h2>
      <p class="text-[14px] md:text-[18px] font-normal  text-primary fade-in-text" style="--delay: 0.4s;">
        人生100年時代を迎え、将来に向けた資産形成や運用の重要性はこれまで以上に高まっています。かつての「貯蓄から投資へ」という流れは、今や個人のライフスタイルに合わせた柔軟で多様な資産運用へと進化しています。私たちは、一人ひとりが自分らしい未来を描けるよう、革新と創造を通じて人生100年時代を支えるパートナーになります。
      </p>
    </div>
    <div class="size-40 md:size-48 rounded-full relative overflow-hidden">
      <Image src={HeaderLogo} alt="Slogan" class="absolute inset-0 w-full h-full object-contain pointer-events-none" />
    </div>
    
    <!-- 右カラム：ボタン（幅1） -->
    <div class="flex-[1] flex justify-center items-center fade-in-text" style="--delay: 0.8s;">
      <a href="/mission">
        <button
          type="button"
          class="text-white font-tsukushi bg-green-900 hover:bg-green-500 font-medium rounded-lg text-sm px-8 py-4 text-center"
        >
          OUR MISSION
          <span class="ml-2 inline-block align-middle">→</span>
        </button>
      </a>
    </div>
  </div>
</section>


<!-- VALUES セクション（上下の線を共通、4行は等間隔） -->
<section class="w-full bg-primary-back text-primary py-12 md:py-24 px-4 md:px-0">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-[auto,1fr] gap-8">

    <!-- Left Title -->
    <div class="md:pr-8 flex flex-col justify-start">
      <div class="flex items-center">
        <div class="black-bar md:mb-4 mr-4"></div>
        <p class="text-sm md:text-base tracking-wider font-tsukushi text-secondary fade-in-text" style="--delay: 0.2s;">
          ４つの行動指針
        </p>
      </div>
      <h2 class="text-3xl md:text-6xl font-bold tracking-widest font-tsukushi text-secondary fade-in-text" style="--delay: 0.4s;">
        VALUES
      </h2>
    </div>

    <!-- Right Content：下線＋中仕切り、4行を等間隔 -->
    <div class="grid grid-rows-4 border-b border-primary divide-y divide-primary">

      <!-- Row 1 -->
      <div class="flex flex-col md:flex-row items-stretch gap-4 md:gap-6 px-0 pt-6 md:pt-8 pb-6 md:pb-8">
        <div class="w-full md:w-12 flex items-center justify-center">
          <span class="text-xs tracking-widest md:-rotate-90 whitespace-nowrap font-tsukushi fade-in-text" style="--delay: 0.4s;">Honest</span>
        </div>
        <div class="flex-1 flex items-center justify-center">
          <h3 class="text-2xl md:text-4xl font-tsukushi text-secondary font-normal leading-tight text-center fade-in-text" style="--delay: 0.6s;">
            学びの姿勢
          </h3>
        </div>
        <div class="w-full md:w-1/3 flex flex-col justify-between md:pl-8">
          <p class="text-sm mb-4 md:mb-6 font-tsukushi fade-in-text" style="--delay: 0.8s;">
            私たちは、成長できる「環境」にこだわります。常に学び続け、お互いを高めあうことで
            お客様に最高のパフォーマンスを提供し続けます。成長意欲を持ち、学びぬくプロフェッショナル集団であり続けます。
          </p>
          <div class="w-full text-center text-secondary font-tsukushi fade-in-text" style="--delay: 0.8s;">
            「昨日の自分を超える」
          </div>
        </div>
      </div>

      <!-- Row 2 -->
      <div class="flex flex-col md:flex-row items-stretch gap-4 md:gap-6 px-0 pt-6 md:pt-8 pb-6 md:pb-8">
        <div class="w-full md:w-12 flex items-center justify-center">
          <span class="text-xs tracking-widest md:-rotate-90 whitespace-nowrap font-tsukushi fade-in-text" style="--delay: 0.4s;">Trust</span>
        </div>
        <div class="flex-1 flex items-center justify-center">
          <h3 class="text-2xl md:text-4xl font-tsukushi text-secondary font-normal leading-tight text-center fade-in-text" style="--delay: 0.6s;">
            信頼できる人柄
          </h3>
        </div>
        <div class="w-full md:w-1/3 flex flex-col justify-between md:pl-8">
          <p class="text-sm mb-4 md:mb-6 font-tsukushi fade-in-text" style="--delay: 0.8s;">
            素直な姿勢を謙虚な心を持ち、明るく前向きな行動で周囲に笑顔と安心を届ける。人として信頼される魅力を持つ人材を育て、ともに成長します。
          </p>
          <div class="w-full text-center text-secondary font-tsukushi fade-in-text" style="--delay: 0.8s;">
            「素直に 謙虚に 前向きに」
          </div>
        </div>
      </div>

      <!-- Row 3 -->
      <div class="flex flex-col md:flex-row items-stretch gap-4 md:gap-6 px-0 pt-6 md:pt-8 pb-6 md:pb-8">
        <div class="w-full md:w-12 flex items-center justify-center">
          <span class="text-xs tracking-widest md:-rotate-90 whitespace-nowrap font-tsukushi fade-in-text" style="--delay: 0.4s;">Speed</span>
        </div>
        <div class="flex-1 flex items-center justify-center">
          <h3 class="text-2xl md:text-4xl font-tsukushi text-secondary font-normal leading-tight text-center fade-in-text" style="--delay: 0.6s;">
            迅速な対応力
          </h3>
        </div>
        <div class="w-full md:w-1/3 flex flex-col justify-between md:pl-8">
          <p class="text-sm mb-4 md:mb-6 font-tsukushi fade-in-text" style="--delay: 0.8s;">
            即時対応・即時行動・即時改善こそがプロフェッショナルの使命。相手の気持ちや思いを汲み取り、信頼関係を築く。迅速かつ的確な行動で答え続ける集団であり続けます。
          </p>
          <div class="w-full text-center text-secondary font-tsukushi fade-in-text" style="--delay: 0.8s;">
            「すぐ動く すぐ応える すぐ改善する」
          </div>
        </div>
      </div>

      <!-- Row 4 -->
      <div class="flex flex-col md:flex-row items-stretch gap-4 md:gap-6 px-0 pt-6 md:pt-8 pb-6 md:pb-8">
        <div class="w-full md:w-12 flex items-center justify-center">
          <span class="text-xs tracking-widest md:-rotate-90 whitespace-nowrap font-tsukushi fade-in-text" style="--delay: 0.4s;">Growth</span>
        </div>
        <div class="flex-1 flex items-center justify-center">
          <h3 class="text-2xl md:text-4xl font-tsukushi text-secondary font-normal leading-tight text-center fade-in-text" style="--delay: 0.6s;">
            持続的な成長
          </h3>
        </div>
        <div class="w-full md:w-1/3 flex flex-col justify-between md:pl-8">
          <p class="text-sm mb-4 md:mb-6 font-tsukushi fade-in-text" style="--delay: 0.8s;">
            変化を恐れず、常に新しいことに挑戦。失敗を恐れず、そこから学び、成長する。持続的な成長を通じて、お客様と社会に価値を提供し続けます。
          </p>
          <div class="w-full text-center text-secondary font-tsukushi fade-in-text" style="--delay: 0.8s;">
            「挑戦し続ける 成長し続ける」
          </div>
        </div>
      </div>

    </div>
  </div>
</section>



  <section class="bg-primary-back py-24" id="service">
    <div class="max-w-6xl mx-auto px-4">
      <!-- タイトル部分 -->
      <div class="mb-4">
        <div class="flex items-center mb-1">
          <div class="black-bar mr-4"></div>
          <p class="text-sm md:text-base tracking-wider fade-in-text text-secondary" style="--delay: 0.2s;">事業内容</p>
        </div>
        <h2 class="text-3xl md:text-6xl font-bold tracking-widest font-tsukushi text-secondary fade-in-text" style="--delay: 0.4s;">SERVICE</h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 justify-items-center">
      <!-- Service 01 -->
      <div class="space-y-4">
        <!-- ラベル -->
        <div class="border-t border-primary pt-4 text-xs tracking-wide font-tsukushi text-primary">
          SERVICE <span class="text-primary">#01</span>
        </div>
        <Image
        src={Service1}
        alt="Circus"
        class="w-full h-[220px] md:w-[320px] md:h-[240px] object-cover brightness-130"
        loading="lazy"
        decoding="async"
      />
        <!-- タイトル -->
        <h3 class="text-lg font-bold leading-relaxed font-tsukushi">
          賃貸仲介
        </h3>
        <!-- 本文 -->
        <p class="text-sm text-primary leading-relaxed">
          物件を貸し出したい貸主様と物件を借りたい借主様をおつなぎいたします。</p>
      </div>
  
      <!-- Service 02 -->
      <div class="space-y-4">
        <div class="border-t border-primary pt-4 text-xs tracking-wide font-tsukushi text-primary">
          SERVICE <span class="text-primary">#02</span>
        </div>
        <Image
        src={Service2}
        alt="Circus"
        class="w-full h-[220px] md:w-[320px] md:h-[240px] object-cover brightness-130"
        loading="lazy"  
        decoding="async"
      />
      <h3 class="text-lg font-bold leading-relaxed font-tsukushi">
          売買仲介
        </h3>
        <p class="text-sm text-primary leading-relaxed">
          不動産を売却したい方、購入したい方の間に立ち、手続きや契約をサポートいたします。
        </p>
      </div>
  
      <!-- Service 03 -->
      <div class="space-y-4">
      <div class="border-t border-primary pt-4 text-xs tracking-wide font-tsukushi text-primary">
          SERVICE <span class="text-primary">#03</span>
        </div>
        <Image
        src={Service3}
        alt="Circus"
        class="w-full h-[220px] md:w-[320px] md:h-[240px] object-cover brightness-130"
        loading="lazy"
        decoding="async"
      />
      <h3 class="text-lg font-bold leading-relaxed font-tsukushi">
          不動産投資
        </h3>
        <p class="text-sm text-primary leading-relaxed">
          投資用不動産の売買、運用サポートなど長期にわたってお付き合いいたします。
        </p>
      </div>
    </div>
    <div class="flex justify-center mt-6">
      <a href="/service" class="text-white font-tsukushi bg-green-900 hover:bg-green-500 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">
        詳しくみる
      </a>
    </div>
  </section>

  <!-- 新しいセクション: 施設・基本情報 -->
  <section id="amenities" class="bg-primary-back py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-2 items-center onscreen-root">
        <!-- 左：画像 -->
        <div class="reveal">
          <Image
            src={Circle}
            alt="Circus"
            class="w-full h-[400px] md:w-[480px] md:h-[480px] object-contain brightness-130"
            loading="lazy"
            decoding="async"
          />
        </div>

        <!-- 右：上 文章、下 3列×2行 -->
        <div class="reveal">
          <!-- 上：文章 -->
          <div class="mb-8">
            <h3 class="text-2xl md:text-3xl tracking-tight mb-8 text-secondary">RISE VISTAの</br>トータルライフコンサルティング</h3>
            <p class="text-sm md:text-base text-primary leading-relaxed">
              私たちは、不動産の売買・仲介で最適な選択をサポートし、関係会社と連携した保険でリスクをカバーします。さらに、お客様の状況に合わせて金融機関の紹介までワンストップで対応。資産形成・相続・節税など、ライフステージに合わせた最適解を<strong>「トータルライフコンサルティング」</strong>として提供し、生涯にわたり寄り添います。
            </p>
          </div>
          <!-- 下：3列×2行 -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-6">
            <!-- アイテム1 -->
            <div class="flex items-start gap-4 !bg-white rounded-lg p-4">
              <div class="mt-1 text-primary">
                <!-- 遺産相続アイコン（例: 書類/家） -->
                <svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M12 3l8 6v12H4V9l8-6Zm0 2.18L6 9.5V19h12V9.5l-6-4.32Z"/></svg>
              </div>
              <div>
                <div class="text-[16px]text-primary">遺産相続</div>
                <div class="mt-1 text-[14px] text-primary">相続対策・承継支援</div>
              </div>
            </div>

            <!-- アイテム2 -->
            <div class="flex items-start gap-4 bg-white rounded-lg p-4">
              <div class="mt-1 text-primary">
                <!-- 節税アイコン（電卓風） -->
                <svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M5 2h14a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Zm0 2v16h14V4H5Zm2 2h2v2H7V6Zm0 4h2v2H7v-2Zm0 4h2v2H7v-2Zm0 4h2v2H7v-2Zm4-12h6v6h-6V6Zm0 8h6v6h-6v-6Z"/></svg>
              </div>
              <div>
                <div class="text-[16px] after:text-primary">節税</div>
                <div class="mt-1 text-[13px] text-primary">税務プランニング</div>
              </div>
            </div>

            <!-- アイテム3 -->
            <div class="flex items-start gap-4 bg-white rounded-lg p-4">
              <div class="mt-1 text-primary">
                <!-- 開業アイコン（店舗/ビル） -->
                <svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M4 22V10l8-8l8 8v12H4Zm8-14L6 10v10h4v-6h4v6h4V10l-6-2Z"/></svg>
              </div>
              <div>
                <div class="text-[16px] text-primary">開業</div>
                <div class="mt-1 text-[13px] text-primary">クリニック・事業支援</div>
              </div>
            </div>

            <!-- アイテム4 -->
            <div class="flex items-start gap-4 bg-white rounded-lg p-4">
              <div class="mt-1 text-primary">
                <!-- 不動産投資アイコン -->
                <svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M12 2l9 7h-3v13h-4v-6H10v6H6V9H3l9-7Z"/></svg>
              </div>
              <div>
                <div class="text-[16px]text-primary">不動産投資</div>
                <div class="mt-1 text-[14px] text-primary">収益物件・運用</div>
              </div>
            </div>

            <!-- アイテム5 -->
            <div class="flex items-start gap-4 bg-white rounded-lg p-4">
              <div class="mt-1 text-primary">
                <!-- 保険アイコン -->
                <svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2Zm0 2C7.59 4 4 7.59 4 12s3.59 8 8 8s8-3.59 8-8s-3.59-8-8-8Zm-1 11h2v2h-2v-2Zm0-8h2v6h-2V7Z"/></svg>
              </div>
              <div>
                <div class="text-[16px] text-primary">保険設計</div>
                <div class="mt-1 text-[14px] text-primary">生命・法人保険</div>
              </div>
            </div>

             <!-- アイテム6 -->
              <div class="flex items-start gap-4 bg-white rounded-lg p-4">
               <div class="mt-1 text-primary">
                 <!-- 資産形成アイコン（グラフ） -->
                 <svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M3 17h2v4H3v-4Zm4-6h2v10H7V11Zm4-4h2v14h-2V7Zm4 6h2v8h-2v-8Zm4-10h2v18h-2V3Z"/></svg>
               </div>
               <div>
                 <div class="text-[16px] text-primary">資産形成</div>
                 <div class="mt-1 text-[14px] text-primary">長期投資・ライフプラン</div>
               </div>
             </div>
           </div>

           <!-- 関係会社について -->
           <div class="mt-8">
             <h4 class="text-lg text-primary mb-4">関係会社について</h4>
             <div class="bg-white rounded-lg p-6">               
               <!-- 株式会社Bridge -->
               <div class="border-gray-200">
                 <div class="flex items-center justify-between">
                   <div class="flex items-center gap-3">
                     <span class="text-base text-primary">株式会社Bridge</span>
                     <Image src={Bridge} alt="株式会社Bridge" class="md:w-16 md:h-16 w-10 h-10" loading="lazy" decoding="async" />
                   </div>
                   <a href="https://bridge-company.com" target="_blank" rel="noopener noreferrer" 
                      class="inline-flex items-center gap-2 px-4 py-2 bg-primary-back text-primary rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium">
                     <span>詳細を見る</span>
                     <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                     </svg>
                   </a>
                 </div>
                 <p class="text-sm text-primary mt-2 md:ml-6 ml-2">
                  損害保険から生命保険まで、安心を届ける保険代理店
                </p>
               </div>
             </div>
           </div>

        </div>
      </div>
    </div>
  </section>

   <!-- メニュー-->
  <section class="bg-primary-back relative overflow-hidden w-full">
    <!-- 背景画像コンテナ（パディング付き） -->
    <div class="absolute transition-all duration-700 ease-in-out" id="background-container">
      <div class="absolute inset-0 bg-gradient-to-l from-black/30 to-transparent z-10 rounded-lg opacity-80"></div>
      <Image src={Bg} alt="Background" class="w-full h-full object-cover transition-opacity duration-700 rounded-lg" id="background-image" data-preload />
    </div>
  
    <!-- メインコンテンツ -->
    <div class="relative z-20 flex items-center justify-center p-4 md:p-8 lg:p-12 font-tsukushi">
      <div class="max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-16">
        
        <!-- 左カラム -->
        <div class="flex flex-col justify-center space-y-4">
          <!-- 左側のメニュー項目 -->
          <nav class="space-y-3">
            <a 
              href="#company" 
              class="menu-item group flex bg-white items-center justify-between py-4 px-6 rounded-xl transition-all duration-300 hover:bg-white hover:shadow-lg transform hover:-translate-y-1"
              data-image="1"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-400 text-sm font-medium">01</span>
                <span class="text-gray-800 font-medium group-hover:text-teal-600 transition-colors">
                  会社概要
                </span>
              </div>
              <svg class="w-5 h-5 text-gray-400 group-hover:text-teal-600 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
    
            <a 
              href="/mission" 
              class="menu-item group flex items-center bg-white justify-between py-4 px-6 rounded-xl transition-all duration-300 hover:bg-white hover:shadow-lg transform hover:-translate-y-1"
              data-image="2"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-400 text-sm font-medium">02</span>
                <span class="text-gray-800 font-medium group-hover:text-teal-600 transition-colors">
                  Mission・Value・Purpose
                </span>
              </div>
              <svg class="w-5 h-5 text-gray-400 group-hover:text-teal-600 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>

            <a 
              href="/mission#message" 
              class="menu-item group flex items-center bg-white justify-between py-4 px-6 rounded-xl transition-all duration-300 hover:bg-white hover:shadow-lg transform hover:-translate-y-1"
              data-image="3"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-400 text-sm font-medium">03</span>
                <span class="text-gray-800 font-medium group-hover:text-teal-600 transition-colors">
                  代表メッセージ
                </span>
              </div>
              <svg class="w-5 h-5 text-gray-400 group-hover:text-teal-600 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </nav>
        </div>
    
        <!-- 右カラム -->
        <div class="flex flex-col justify-center space-y-4">
          <!-- 右側のメニュー項目 -->
          <nav class="space-y-3">
            <a 
              href="/mission#consultants" 
              class="menu-item group flex bg-white items-center justify-between py-4 px-6 rounded-xl transition-all duration-300 hover:bg-white hover:shadow-lg transform hover:-translate-y-1"
              data-image="4"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-400 text-sm font-medium">04</span>
                <span class="text-gray-800 font-medium group-hover:text-teal-600 transition-colors">
                  コンサルタント紹介
                </span>
              </div>
              <svg class="w-5 h-5 text-gray-400 group-hover:text-teal-600 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>

            <a 
              href="/service" 
              class="menu-item group flex bg-white items-center justify-between py-4 px-6 rounded-xl transition-all duration-300 hover:bg-white hover:shadow-lg transform hover:-translate-y-1"
              data-image="5"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-400 text-sm font-medium">05</span>
                <span class="text-gray-800 font-medium group-hover:text-teal-600 transition-colors">
                  事業内容
                </span>
              </div>
              <svg class="w-5 h-5 text-gray-400 group-hover:text-teal-600 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>

            <a 
              href="#faq" 
              class="menu-item group flex bg-white items-center justify-between py-4 px-6 rounded-xl transition-all duration-300 hover:bg-white text-primary-back hover:shadow-lg transform hover:-translate-y-1"
              data-image="6"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-400 text-sm font-medium">06</span>
                <span class="text-gray-800 font-medium group-hover:text-teal-600 transition-colors">
                  よくある質問
                </span>
              </div>
              <svg class="w-5 h-5 text-gray-400 group-hover:text-teal-600 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </nav>
        </div>
      </div>
    </div>
  </section>
  
  <section class="py-24 bg-primary-back" id="company">
    <div class="max-w-6xl mx-auto px-4">
      <!-- タイトル部分 -->
      <div class="mb-4">
        <div class="flex items-center mb-1">
          <div class="black-bar mr-4"></div>
          <p class="text-sm md:text-base tracking-wider fade-in-text text-secondary" style="--delay: 0.2s;">会社概要</p>
        </div>
        <h2 class="text-3xl md:text-6xl font-bold tracking-widest font-tsukushi text-secondary fade-in-text" style="--delay: 0.4s;">
          COMPANY
        </h2>
      </div>
  
      <!-- 本文2カラム -->
      <div class="flex flex-col md:flex-row gap-8 items-stretch">
        <!-- 左：ロゴ -->
        <div class="md:w-1/3 w-full flex justify-center items-center">
          <Image 
            src={HeaderLogo} 
            alt="RISE VISTA ロゴ" 
            class="object-contain w-auto max-h-[200px]" 
          />
        </div>
  
        <!-- 右：リスト -->
        <div class="md:w-2/3 w-full">
          <dl class="divide-y divide-primary text-primary">
            <div class="flex flex-col md:flex-row py-3">
              <dt class="md:w-[35%] w-full">会社名</dt>
              <dd class="md:w-[65%] w-full">株式会社RISE VISTA</dd>
            </div>
            <div class="flex flex-col md:flex-row py-3">
              <dt class="md:w-[35%] w-full">代表取締役</dt>
              <dd class="md:w-[65%] w-full">土屋 健二</dd>
            </div>
            <div class="flex flex-col md:flex-row py-3">
              <dt class="md:w-[35%] w-full">設立</dt>
              <dd class="md:w-[65%] w-full">2019年1月22日</dd>
            </div>
            <div class="flex flex-col md:flex-row py-3">
              <dt class="md:w-[35%] w-full">所在地</dt>
              <dd class="md:w-[65%] w-full">東京都渋谷区渋谷1-1-8 青山ダイヤモンドビル7階</dd>
            </div>
            <div class="flex flex-col md:flex-row py-3">
              <dt class="md:w-[35%] w-full">事業内容</dt>
              <dd class="md:w-[65%] w-full">不動産売買・仲介業務・投資運用業</dd>
            </div>
          </dl>
        </div>
      </div>
    </div>
  </section>  
  <!-- Blog Section -->
  <section class="py-24 bg-primary-back" id="blog">
    <div class="max-w-6xl mx-auto px-4">
      <!-- タイトル部分 -->
      <div class="mb-4">
        <div class="flex items-center mb-1">
          <div class="black-bar mr-4"></div>
          <p class="text-sm md:text-base tracking-wider fade-in-text text-secondary" style="--delay: 0.2s;">最新情報</p>
        </div>
        <h2 class="text-3xl md:text-6xl font-bold tracking-widest font-tsukushi text-secondary fade-in-text" style="--delay: 0.4s;">BLOG</h2>
      </div>

      <!-- ブログ記事一覧 -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {/* @ts-ignore */}
        {withExcerpt.map((post: any, index: number) => (
          <article class="bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 fade-in-text" style={`--delay: ${0.6 + index * 0.2}s`}>
            <a href={`/blog/${post.slug}/`} class="block h-full">
              <div class="p-6 h-full flex flex-col">
                <div class="mb-2">
                  <span class="text-xs tracking-wide font-tsukushi text-primary border-t border-primary-back pt-2 inline-block">
                    BLOG <span class="text-primary">#{String(index + 1).padStart(2, '0')}</span>
                  </span>
                </div>
                <h3 class="text-lg font-bold leading-relaxed font-tsukushi text-secondary mb-3 line-clamp-2">
                  {post.data.title}
                </h3>
                <p class="text-sm text-primary mb-4 font-tsukushi">
                  {new Date(post.data.date).toLocaleDateString('ja-JP', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                  })}
                </p>
                <p class="text-sm text-gray-700 leading-relaxed flex-grow line-clamp-3">
                  {post.excerpt}…
                </p>
                <div class="mt-4 pt-4 border-t border-gray-100">
                  <span class="text-xs text-teal-600 font-tsukushi tracking-wide">
                    続きを読む →
                  </span>
                </div>
              </div>
            </a>
          </article>
        ))}
      </div>

      <!-- ブログ一覧ページへのリンク -->
      <div class="flex justify-center mt-12">
        <a href="/blog" class="text-white font-tsukushi bg-green-900 hover:bg-green-500 font-medium rounded-lg text-sm px-8 py-4 text-center transition-colors duration-300">
          すべての記事を見る
          <span class="ml-2 inline-block align-middle">→</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Properties Carousel Section -->
  <section class="py-24 bg-primary-back" id="properties">
    <PropertyCarousel />
  </section>

  <!-- よくある質問 セクション -->
  <section class="py-24 bg-primary-back" id="faq">
    <div class="max-w-6xl mx-auto px-4">
      <!-- タイトル部分 -->
      <div class="mb-4">
        <div class="flex items-center mb-1">
          <div class="black-bar mr-4"></div>
          <p class="text-sm text-secondary tracking-wider">よくある質問</p>
        </div>
        <h2 class="text-3xl md:text-6xl font-bold tracking-widest font-inter text-secondary">FAQ</h2>
      </div>

      <!-- 質問リスト -->
      <div class="space-y-6">
        <!-- 質問1 -->
        <div class="bg-primary-back rounded-lg shadow-sm border border-gray-200 text-secondary overflow-hidden group">
          <button class="w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors">
            <h3 class="text-sm md:text-lg text-secondary group-hover:text-secondary">不動産投資は初心者でも始められますか？</h3>
            <span class="text-gray-500 text-xl">+</span>
          </button>
          <div class="px-6 p-4 hidden">
            <p class="text-primary leading-relaxed text-sm md:text-base">
              はい、初心者の方でも安心して始めていただけます。私たちが投資の基礎から丁寧にサポートし、リスクを最小限に抑えた投資プランをご提案いたします。経験豊富なスタッフが一からお手伝いいたします。
            </p>
          </div>
        </div>

        <!-- 質問2 -->
        <div class="bg-primary-back rounded-lg shadow-sm border border-gray-200 text-secondary overflow-hidden group">
          <button class="w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors">
            <h3 class="text-sm md:text-lg text-secondary group-hover:text-secondary">どのような物件がおすすめですか？</h3>
            <span class="text-gray-500 text-xl">+</span>
          </button>
          <div class="px-6 p-4 hidden">
            <p class="text-primary leading-relaxed text-sm md:text-base">
              お客様の投資目的や予算に応じて最適な物件をご提案いたします。一般的には、駅近のマンションやオフィスビル、商業施設などが安定した収益を期待できる物件として人気があります。詳細は個別にご相談ください。
            </p>
          </div>
        </div>

        <!-- 質問3 -->
        <div class="bg-primary-back rounded-lg shadow-sm border border-gray-200 text-secondary overflow-hidden group">
          <button class="w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors">
            <h3 class="text-sm md:text-lg text-secondary group-hover:text-secondary">投資に必要な資金はどのくらいですか？</h3>
            <span class="text-gray-500 text-xl">+</span>
          </button>
          <div class="px-6 p-4 hidden">
            <p class="text-primary leading-relaxed text-sm md:text-base">
              物件の種類や規模によって異なりますが、小規模な投資物件であれば数百万円から始めることができます。また、ローンを活用することで、より大きな物件への投資も可能です。資金計画についてもご相談ください。
            </p>
          </div>
        </div>

        <!-- 質問4 -->
        <div class="bg-primary-back rounded-lg shadow-sm border border-gray-200 text-secondary overflow-hidden group">
          <button class="w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors">
            <h3 class="text-sm md:text-lg text-secondary group-hover:text-secondary">物件の管理はどうなりますか？</h3>
            <span class="text-gray-500 text-xl">+</span>
          </button>
          <div class="px-6 p-4 hidden">
            <p class="text-primary leading-relaxed text-sm md:text-base">
              物件の管理は私たちが代行いたします。入居者募集、家賃管理、修繕対応など、投資家の方に代わってすべての管理業務を行います。お客様は収益に集中していただけます。
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
  </div>
</Layout>

<!-- ========================= CSS ========================= -->
<style>

/* Fade in text animation */
.fade-in-text {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  transition-delay: var(--delay, 0s);
  display: inline-block;
}

.fade-in-text.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Per-character fade-in */
.fade-char {
  opacity: 0;
  display: inline-block;
  transform: translateY(8px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}
.fade-char.in {
  opacity: 1;
  transform: translateY(0);
}

.ellipse-image-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.ellipse-wrapper {
  position: absolute;
  width: 70%;
  height: 60%;
  top: 50%;
  left: 60%;
  transform: translate(-50%, -50%) rotate(-12deg);
  border-radius: 50%;
  overflow: hidden;
  opacity: 0.9;
}

.ellipse-background-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 120%;
  height: 120%;
  object-fit: cover;
  transform: rotate(12deg) scale(1.1);
  transform-origin: center;
  opacity: 0;
  will-change: opacity; /* パフォーマンス安定 */
}

/* ▼ 各スライド：24sを4分割して担当（0–6s / 6–12s / 12–18s / 18–24s） */
.ellipse-background-image.slide-0 {
  animation: smoothSlideShow 24s linear infinite both;
  animation-delay: 0s;      /* 0–6s 担当 */
}
.ellipse-background-image.slide-1 {
  animation: smoothSlideShow 24s linear infinite both;
  animation-delay: -6s;     /* 6–12s 担当 */
}
.ellipse-background-image.slide-2 {
  animation: smoothSlideShow 24s linear infinite both;
  animation-delay: -12s;    /* 12–18s 担当 */
}
.ellipse-background-image.slide-3 {
  animation: smoothSlideShow 24s linear infinite both;
  animation-delay: -18s;    /* 18–24s 担当 */
}

/* レスポンシブ調整 */
@media (max-width: 768px) {
  .ellipse-wrapper {
    width: 95%;
    height: 35%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-15deg);
  }
  .ellipse-background-image {
    top: 50%;
    left: 50%;
    width: 140%;
    height: 140%;
    transform: translate(-50%, -50%) rotate(15deg) scale(1.2);
  }
}

@media (max-width: 480px) {
  .ellipse-wrapper {
    width: 98%;
    height: 30%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-10deg);
  }
  .ellipse-background-image {
    top: 50%;
    left: 50%;
    width: 130%;
    height: 130%;
    transform: translate(-50%, -50%) rotate(10deg) scale(1.15);
  }
}

/* ▼ 空白が出ないクロスフェード（1枚＝24sの25%担当） */
@keyframes smoothSlideShow {
  0%    { opacity: 0; }
  2%    { opacity: 1; }  /* 先行IN開始（24sの2% = 約0.48s） */
  22%   { opacity: 1; }  /* 担当枠内の可視維持 */
  28%   { opacity: 0; }  /* 遅延OUT終了（24sの3% = 約0.72s） */
  100%  { opacity: 0; }
}
/* お好みで：視覚効果を減らしたい人への配慮 */
@media (prefers-reduced-motion: reduce) {
  .ellipse-background-image { animation: none !important; opacity: 1; }
}

.black-bar {
  width: 5vw;
  min-width: 40px;
  height: 1px;
  background: #1d453c;
  display: block;
  border-radius: 1px;
}

.writing-vertical {
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

/* Company section menu styles */
.menu-item {
  border-left: 3px solid transparent;
}

.menu-item:hover {
  border-left-color: #0d9488; /* teal-600 */
}

/* Line clamp utilities for blog content */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

</style>

<!-- ========================= JavaScript ========================= -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Per-character fade-in for elements marked with .fade-chars
    const prepareFadeChars = (el: HTMLElement) => {
      const text = el.textContent || '';
      el.textContent = '';
      const frag = document.createDocumentFragment();
      Array.from(text).forEach((ch) => {
        const span = document.createElement('span');
        span.textContent = ch;
        span.className = 'fade-char';
        frag.appendChild(span);
      });
      el.appendChild(frag);
    };

    const fadeCharTargets = Array.from(document.querySelectorAll('.fade-chars')) as HTMLElement[];
    fadeCharTargets.forEach(prepareFadeChars);

    const fadeCharsObserver = new IntersectionObserver((entries, obs) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        const el = entry.target as HTMLElement;
        const chars = Array.from(el.querySelectorAll('.fade-char')) as HTMLElement[];
        chars.forEach((c, i) => {
          c.style.transitionDelay = `${i * 60}ms`;
          c.classList.add('in');
        });
        obs.unobserve(el);
      });
    }, { threshold: 0.1 });

    fadeCharTargets.forEach((el) => fadeCharsObserver.observe(el));
    // Preload gate: wait for critical images (data-preload) before reveal
    const preloader = document.getElementById('preloader');
    const pageRoot = document.getElementById('page-root');
    const preloadEls = Array.from(document.querySelectorAll('img[data-preload], picture[data-preload] img')) as HTMLImageElement[];

    const waitForImage = (img: HTMLImageElement) => new Promise<void>((resolve) => {
      if (img.complete && img.naturalWidth > 0) return resolve();
      const onLoad = () => { cleanup(); resolve(); };
      const onError = () => { cleanup(); resolve(); };
      const cleanup = () => {
        img.removeEventListener('load', onLoad);
        img.removeEventListener('error', onError);
      };
      img.addEventListener('load', onLoad, { once: true });
      img.addEventListener('error', onError, { once: true });
    });

    const reveal = () => {
      if (preloader) preloader.style.display = 'none';
      if (pageRoot) pageRoot.classList.remove('opacity-0');
    };

    const timeoutMs = 4000; // safety timeout
    const timeout = new Promise<void>((resolve) => setTimeout(resolve, timeoutMs));
    Promise.race([
      Promise.all(preloadEls.map(waitForImage)),
      timeout,
    ]).then(reveal);

    // ヘッダー・フッターのアンカーリンクを取得
    document.querySelectorAll('a[href^="#"]').forEach(link => {
      link.addEventListener('click', (event) => {
        const target = event.currentTarget as HTMLElement;
        const href = target.getAttribute('href');
        if (href && href.startsWith('#')) {
          const targetElement = document.querySelector(href);
          if (targetElement) {
            event.preventDefault();
            targetElement.scrollIntoView({ behavior: 'smooth' });
          }
        }
      });
    });
  });

  document.addEventListener('DOMContentLoaded', () => {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });

  document.querySelectorAll('.fade-in-text').forEach((el) => {
    observer.observe(el);
  });

  // Company section background image switching
  const companySection = document.querySelector('section.min-h-screen.bg-gray-50');
  const companyImages = companySection ? JSON.parse(companySection.getAttribute('data-images') || '[]') : [];

  const backgroundImage = document.getElementById('background-image') as HTMLImageElement;
  const menuItems = document.querySelectorAll('.menu-item');

  // 各メニューアイテムにhoverイベントを追加
  menuItems.forEach((item) => {
    const imageIndexAttr = item.getAttribute('data-image');
    if (!imageIndexAttr) return;
    
    const imageIndex = parseInt(imageIndexAttr);
    
    item.addEventListener('mouseenter', () => {
      if (backgroundImage && companyImages[imageIndex]) {
        backgroundImage.style.opacity = '0';
        
        setTimeout(() => {
          backgroundImage.src = companyImages[imageIndex];
          backgroundImage.style.opacity = '1';
        }, 350);
      }
    });
  });

  // デフォルト画像に戻す（最初の画像に戻す）
  if (companySection) {
    companySection.addEventListener('mouseleave', () => {
      if (backgroundImage) {
        backgroundImage.style.opacity = '0';
        setTimeout(() => {
          backgroundImage.src = companyImages[0]; // デフォルトは最初の画像
          backgroundImage.style.opacity = '1';
        }, 350);
      }
    });
  }

  // onscreen演出: 画面に入ったら .onscreen を付与
  const onscreenRoots = document.querySelectorAll('.onscreen-root');
  onscreenRoots.forEach((root) => {
    const io = new IntersectionObserver(([ent]) => {
      if (ent.isIntersecting) {
        root.classList.add('onscreen');
        io.disconnect();
      }
    }, { threshold: 0.2 });
    io.observe(root);
  });

  // FAQ アコーディオン機能
  document.querySelectorAll('#faq button').forEach(button => {
    button.addEventListener('click', () => {
      const faqItem = button.closest('.group') as HTMLElement;
      const content = faqItem?.querySelector('.px-6.p-4') as HTMLElement;
      const icon = button.querySelector('span') as HTMLElement;
      
      if (content && icon) {
        if (content.classList.contains('hidden')) {
          // 開く
          content.classList.remove('hidden');
          icon.textContent = '−';
        } else {
          // 閉じる
          content.classList.add('hidden');
          icon.textContent = '+';
        }
      }
    });
  });
});
</script>