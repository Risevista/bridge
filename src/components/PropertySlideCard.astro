---
import Image from '../components/Image.astro';
import { Image as AImage } from "astro:assets";
import Layout from '../layouts/Layout.astro';
import Logo from '../assets/img/risevista-logo.webp';  
interface Props {
  title: string;
  date: string | Date;
  thumbnail?: string;
  brand?: string;
  brand_logo?: string;
  link?: string;   // 外部詳細があれば「詳細を見る」に使用
  href?: string;   // サイト内詳細に行く場合（未使用なら "#"）
}
const { title, date, thumbnail, brand, brand_logo, link, href = "#" } = Astro.props;

const d = new Date(date);
const formatted = d.toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" });
---

<article class="card relative bg-gray-500 overflow-hidden max-w-[582px]">
  <!-- 画像 -->
  <a href={href} aria-label={title}>
    <img
      src={thumbnail ?? "/uploads/placeholder.jpg"}
      alt={title}
      class="w-full h-[260px] md:h-[300px] object-cover"
      loading="lazy"
    />
  </a>

  <!-- 本文ボックス -->
  <div class="px-6 py-6 flex gap-6 items-start bg-gray-300">
    <!-- Logo -->
    <div class="flex-shrink-0">
      {brand_logo
        ? <Image src={Logo} alt={brand ?? "brand"} class="w-10 h-10 object-cover" loading="lazy" />
        : (brand
            ? <span class="inline-flex items-center justify-center w-10 h-10 bg-yellow-300 text-sm font-bold">{brand.slice(0,3)}</span>
            : null)}
    </div>
    <!-- タイトル＆日付 -->
    <div class="min-w-0">
      <time class="block text-sm text-neutral-500 mb-2">{formatted}</time>
      <h3 class="text-[22px] leading-snug font-semibold line-clamp-2">{title}</h3>

      {link && (
        <div class="pt-3">
          <a href={link} target="_blank" rel="noopener noreferrer" class="text-sm underline">詳細を見る</a>
        </div>
      )}
    </div>
  </div>
</article>

<style>
  /* スクショの雰囲気寄せ（モバイル幅でカード横幅調整などは Swiper 側で） */
  .card { background: #fff; text-align: left; }
  @media (max-width: 768px) {
    .card { width: 290px; }
  }
</style>

