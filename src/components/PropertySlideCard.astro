---
import Image from '../components/Image.astro';
import Logo from '../assets/img/risevista-logo.webp';  

interface Props {
  title: string;
  date: string | Date;
  thumbnail?: string;
  brand?: string;
  brand_logo?: string;
  link?: string;   // 外部詳細があれば「詳細を見る」に使用
  href?: string;   // サイト内詳細に行く場合（未使用なら "#"）
  class?: string;  // CSS class for styling
}
const { title, date, thumbnail, brand, brand_logo, link, href = "#", class: className } = Astro.props;

const d = new Date(date);
const year = d.getFullYear();
const month = d.getMonth() + 1;
const day = d.getDate();
const formatted = `${year}年${month}月${day}日`;
---

<article class={`card relative bg-gray-500 overflow-hidden w-full max-w-sm ${className || ''}`}>
  <!-- 画像 -->
  <a href={href} aria-label={title}>
    <img
      src={thumbnail ?? "/uploads/placeholder.jpg"}
      alt={title}
      class="w-full h-[260px] md:h-[300px] object-cover transition-transform duration-500 hover:scale-105"
      loading="lazy"
    />
  </a>

  <!-- 本文ボックス -->
  <div class="px-6 py-6 flex gap-6 items-start bg-gray-200">
    <!-- Logo -->
    <div class="flex-shrink-0">
      {brand_logo
        ? <Image src={Logo} alt={brand ?? "brand"} class="w-6 h-6 object-cover absolute left-2" loading="lazy" />
        : (brand
            ? <span class="inline-flex items-center justify-center w-10 h-10 bg-yellow-300 text-sm font-bold">{brand.slice(0,3)}</span>
            : null)}
    </div>  
    <!-- タイトル＆日付 -->
    <div class="min-w-0">
      <time class="block text-sm text-neutral-500 mb-2">{formatted}</time>
      <h3 class="leading-snug text-primary-back font-semibold line-clamp-2">{title}</h3>

      {link && (
        <div class="pt-3">
          <a href={link} target="_blank" rel="noopener noreferrer" class="text-[12px] text-sm underline text-primary-back">詳細を見る</a>
        </div>
      )}
    </div>
  </div>
</article>

<style>
  /* スクショの雰囲気寄せ（モバイル幅でカード横幅調整などは Swiper 側で） */
  .card { 
    background: #fff; 
    text-align: left; 
    width: 100%;
    max-width: 280px;
  }
  @media (min-width: 768px) {
    .card { 
      max-width: 400px; 
    }
  }
</style>

